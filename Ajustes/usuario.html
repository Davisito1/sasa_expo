<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Usuario</title>

  <!-- Estilos globales (incluye topbar y search) -->
  <link rel="stylesheet" href="../CSS/dashboard.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Estilo propio de la página -->
  <link rel="stylesheet" href="../CSS/usuario.css" />
</head>
<body>
  <!-- Sidebar -->
  <aside id="sidebar">
    <!-- Header fijo del sidebar: logo + SASA + divisor -->
    <div class="sidebar-header">
      <div class="logo">
        <img src="../IMG/logo sasa.jpg" alt="Logo SASA" />
        <span class="logo-text">SASA</span>
      </div>
      <div class="logo-divider"></div>
    </div>
    <ul>
   <li><a href="../dashboard/index.html"><i class="fas fa-home"></i><span>Inicio</span></a></li>
      <li><a href="../vehiculos/vehiculos.html"><i class="fas fa-car"></i><span>Vehículos</span></a></li>
      <li><a href="../mantenimiento/mantenimiento.html"><i class="fas fa-wrench"></i><span>Mantenimiento</span></a></li>
      <li><a href="../empleados/empleados.html"><i class="fas fa-user"></i><span>Empleados</span></a></li>
      <li><a href="../clientes/clientes.html"><i class="fas fa-users"></i><span>Clientes</span></a></li>
      <li><a href="../citas/citas.html"><i class="fas fa-calendar"></i><span>Citas</span></a></li>
      <li><a href="../facturas/facturas.html"><i class="fas fa-receipt"></i><span>Facturas</span></a></li>
      <li><a href="../OrdenDetalle/OrdenDetalle.html"><i class="fas fa-table"></i><span>Tabla de Ordenes</span></a></li>
      <li><a href="../Trabajos/trabajos.html"><i class="fas fa-clipboard-list"></i><span>Trabajos</span></a></li>

    </ul>
  </aside>

  <!-- Topbar -->
  <div class="topbar shadow-sm">
    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Buscar..." />
    </div>
    <div class="topbar-right">
      <a href="../notificaciones/notificaciones.html"><i class="fas fa-bell fa-lg"></i></a>
      <span class="ms-2">Usuario</span>
      <a href="../Ajustes/usuario.html"><i class="fas fa-user-circle fa-lg" id="userIcon"></i></a>
    </div>
  </div>

  <!-- Contenido -->
  <main class="container-fluid with-topbar-offset with-side-offset">
    <div class="page-wrap">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-9">
          <div class="card shadow-sm usuario-card" id="ajustes">
            <div class="card-header d-flex align-items-center gap-2">
              <i class="fa-solid fa-user-gear"></i>
              <h5 class="mb-0">Ajustes de usuario</h5>
            </div>

            <div class="card-body">
              <!-- Solo lectura -->
              <div class="row g-3 mb-2">
                <div class="col-sm-4">
                  <label class="form-label mb-1">ID usuario</label>
                  <input id="infoIdUsuario" class="form-control" type="text" disabled>
                </div>
                <div class="col-sm-4">
                  <label class="form-label mb-1">Rol</label>
                  <input id="infoRol" class="form-control" type="text" disabled>
                </div>
                <div class="col-sm-4">
                  <label class="form-label mb-1">Estado</label>
                  <input id="infoEstado" class="form-control" type="text" disabled>
                </div>
              </div>

              <hr class="my-4">

              <!-- Editar nombre -->
              <form id="formUsuario" class="mb-4" autocomplete="off">
                <div class="row g-3 align-items-end">
                  <div class="col-md-8">
                    <label for="nombreUsuario" class="form-label">Nombre de usuario</label>
                    <input
                      type="text"
                      id="nombreUsuario"
                      class="form-control"
                      maxlength="100"
                      required
                      pattern="^[A-Za-z0-9._-]{4,100}$"
                      title="4-100 caracteres. Solo letras, números y . _ -"
                    >
                    <div class="form-text">Debe ser único. Permitidos: letras, números y . _ - (4–100).</div>
                  </div>
                  <div class="col-md-4 d-grid">
                    <button type="submit" id="btnGuardarNombre" class="btn btn-primary">
                      <i class="fa-solid fa-floppy-disk me-1"></i> Guardar nombre
                    </button>
                  </div>
                </div>
              </form>

              <!-- Botones -->
              <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <button type="button" id="btnCerrarSesion" class="btn btn-outline-danger">
                  <i class="fa-solid fa-right-from-bracket me-1"></i> Cerrar sesión
                </button>
                <button type="button" id="btnMostrarPwd" class="btn btn-success ms-auto">
                  <i class="fa-solid fa-key me-1"></i> Cambiar contraseña
                </button>
              </div>

              <!-- Sección de contraseña -->
              <form id="formPassword" class="mt-3 d-none" autocomplete="off">
                <div class="row g-3">
                  <div class="col-md-4">
                    <label for="passActual" class="form-label">Contraseña actual</label>
                    <div class="input-group">
                      <input type="password" id="passActual" class="form-control" autocomplete="current-password" required>
                      <button type="button" class="btn btn-outline-secondary toggle-pass" data-target="passActual">
                        <i class="fa-regular fa-eye"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="passNueva" class="form-label">Nueva contraseña</label>
                    <div class="input-group">
                      <input
                        type="password"
                        id="passNueva"
                        class="form-control"
                        autocomplete="new-password"
                        required
                      >
                      <button type="button" class="btn btn-outline-secondary toggle-pass" data-target="passNueva">
                        <i class="fa-regular fa-eye"></i>
                      </button>
                    </div>
                 <div class="form-text">La contraseña debe tener al menos 8 caracteres, incluyendo letras y números.</div>

                  </div>
                  <div class="col-md-4">
                    <label for="passConfirm" class="form-label">Confirmar contraseña</label>
                    <div class="input-group">
                      <input type="password" id="passConfirm" class="form-control" autocomplete="new-password" required>
                      <button type="button" class="btn btn-outline-secondary toggle-pass" data-target="passConfirm">
                        <i class="fa-regular fa-eye"></i>
                      </button>
                    </div>
                  </div>
                </div>

                <div class="d-flex justify-content-end gap-2 mt-3">
                  <button type="button" id="btnCancelarPwd" class="btn btn-light">Cancelar</button>
                  <button type="submit" id="btnConfirmarPwd" class="btn btn-success">
                    <i class="fa-solid fa-check me-1"></i> Confirmar cambio
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="../JS/usuario.js"></script>
</body>
</html>
